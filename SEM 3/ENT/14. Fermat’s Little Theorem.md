## 0. Absolute basics: congruences and units

### 0.1 Congruence

For integers $a,b$ and positive integer $n$:

$$
a \equiv b \pmod{n}
$$

means:

- $n$ divides $a-b$, i.e. $a-b = kn$ for some $k\in\mathbb{Z}$.

You can think: $a$ and $b$ have the same remainder when divided by $n$.

**Basic properties (work like equality):**

If $a\equiv b\pmod{n}$ and $c\equiv d\pmod{n}$, then

- $a+c \equiv b+d \pmod{n}$,
- $a-c \equiv b-d \pmod{n}$,
- $ac \equiv bd \pmod{n}$.

**Cancellation caveat.**

If $ac \equiv bc \pmod{n}$ and $\gcd(c,n)=1$, then

$$
a \equiv b \pmod{n}.
$$

(If $\gcd(c,n)\ne 1$, cancellation can fail.)

### 0.2 Units modulo $n$

An integer $a$ is a **unit modulo $n$** if $\gcd(a,n)=1$.
Equivalently, $a$ has a multiplicative inverse modulo $n$:
there exists $a^{-1}$ such that

$$
aa^{-1} \equiv 1 \pmod{n}.
$$

When $n$ is prime $p$, *every* nonzero residue $1,2,\dots,p-1$ is a unit.

This is crucial for Fermat’s Little Theorem.

---

## 1. Fermat’s Little Theorem — statements

Let $p$ be a **prime**.

### 1.1 Multiplicative form

If $\gcd(a,p)=1$ (i.e. $p\nmid a$), then

$$
a^{p-1} \equiv 1 \pmod{p}.
$$

### 1.2 Universal form

For **any** integer $a$ (no gcd condition needed), we have

$$
a^p \equiv a \pmod{p}.
$$

These two forms are equivalent; we will prove (1.1) from the ground up, then derive (1.2).

---

## 2. Key idea: permuting residues

We work in the reduced residue system modulo $p$.

Consider the set

$$
S = \{1,2,3,\dots,p-1\}.
$$

Let $\gcd(a,p)=1$.
Then multiply every element of $S$ by $a$ (mod $p$):

$$
a, 2a, 3a, \dots, (p-1)a.
$$

**Claim.**  
Modulo $p$, the set $\{a,2a,\dots,(p-1)a\}$ is just a **permutation** of $\{1,2,\dots,p-1\}$.

**Why? Detailed.**

Suppose $ia \equiv ja \pmod{p}$ for some $1\le i,j\le p-1$.

Then
$$
p \mid a(i-j).
$$

Since $\gcd(a,p)=1$, $p$ cannot divide $a$, so it must divide $i-j$.

But $|i-j| < p$, and the only multiple of $p$ in that range is $0$, so $i-j=0$, i.e. $i=j$.

So all $ia$ are distinct modulo $p$.
There are $p-1$ of them, so they must be exactly the residues $1,\dots,p-1$ in some order.

That is the core combinatorial fact.

---

## 3. Proof of Fermat’s Little Theorem (multiplicative form)

Multiply all elements of $S$:

$$
P = 1\cdot2\cdot3\cdots(p-1).
$$

Multiply all elements of the permuted set:

$$
P_a = a\cdot(2a)\cdot(3a)\cdots((p-1)a).
$$

On the one hand, by direct factoring:

$$
P_a = a^{p-1} \cdot (1\cdot2\cdots(p-1)) = a^{p-1} P.
$$

On the other hand, since $\{a,2a,\dots,(p-1)a\}$ is a permutation of $\{1,2,\dots,p-1\}$ modulo $p$,

$$
P_a \equiv P \pmod{p}.
$$

Combine the two:

$$
a^{p-1} P \equiv P \pmod{p}.
$$

Now $\gcd(P,p)=1$ because $P$ is a product of numbers $1,2,\dots,p-1$, none of which is divisible by $p$.
So $P$ is invertible modulo $p$; we can cancel $P$:

$$
a^{p-1} \equiv 1 \pmod{p}.
$$

This proves:

$$
\boxed{
\text{If } \gcd(a,p)=1,\ \ a^{p-1} \equiv 1 \pmod{p}.
}
$$

---

## 4. From $a^{p-1}\equiv1$ to $a^p\equiv a$

For **any** integer $a$, reduce $a$ mod $p$.

Write $a = kp + r$ with $0\le r < p$. Then $a\equiv r\pmod{p}$.

- If $r=0$, then $p\mid a$, so $a^p\equiv 0\equiv a\pmod{p}$.
- If $1\le r\le p-1$, then $\gcd(r,p)=1$ and by the theorem:
  $$
  r^{p-1}\equiv 1 \pmod{p}.
  $$

Then
$$
a^p \equiv r^p = r\cdot r^{p-1} \equiv r\cdot 1 = r \equiv a \pmod{p}.
$$

So for **all** $a$:

$$
\boxed{a^p \equiv a \pmod{p}.}
$$

This is the second standard form.

---

## 5. Alternative viewpoint: binomial theorem trick

This mirrors part of your handwritten notes.

We can prove the universal form by induction on $a$ using the binomial theorem.

### 5.1 Core binomial congruence

For prime $p$ and any $1\le k\le p-1$, the binomial coefficient

$$
\binom{p}{k}
= \frac{p!}{k!(p-k)!}
$$

is divisible by $p$.

Reason: numerator has a factor $p$; denominator is a product of numbers strictly less than $p$, so $p$ does not divide the denominator. Therefore $p$ divides the whole binomial coefficient.

Thus

$$
\binom{p}{k} \equiv 0 \pmod{p}, \quad 1\le k\le p-1.
$$

### 5.2 Apply to $(a+1)^p$

Using binomial theorem:

$$
(a+1)^p
= a^p + \binom{p}{1} a^{p-1} + \binom{p}{2} a^{p-2} + \dots + \binom{p}{p-1} a + 1.
$$

Modulo $p$, all middle terms vanish:

$$
(a+1)^p \equiv a^p + 1 \pmod{p}.
$$

Now use induction on $a$:

- Base: for $a=0$, $0^p\equiv 0$ is true.
- Induction step: assume $a^p \equiv a \pmod{p}$.
  Then
  $$
  (a+1)^p \equiv a^p + 1 \equiv a + 1 \pmod{p}.
  $$

Hence $(a+1)^p \equiv a+1 \pmod{p}$.
By induction, $a^p\equiv a$ for all integers $a$.

This matches your binomial-based proof.

---

## 6. Generalizing to composite moduli via Fermat

Fermat’s theorem is for primes. But your notes already start combining primes.

### 6.1 Case: modulus is product of two distinct primes

Let $p,q$ be distinct primes, and let $n = pq$.
If $\gcd(a,n)=1$, then $\gcd(a,p)=\gcd(a,q)=1$.

By FLT:

$$
a^{p-1} \equiv 1 \pmod{p},
\quad
a^{q-1} \equiv 1 \pmod{q}.
$$

A standard target is to show something like
$$
a^{\text{lcm}(p-1,q-1)} \equiv 1 \pmod{pq},
$$
or more generally $a^{\varphi(n)}\equiv 1\pmod{n}$ when $n$ is product of distinct primes
(early version of Euler’s theorem).

**Example pattern in your notes:**

If $p,q$ are distinct primes and $a^{p-1}\equiv 1\pmod{p}$ and $a^{q-1}\equiv 1\pmod{q}$, then:

- raise $a^{p-1}\equiv1$ to power $(q-1)$ to get
  $$
  a^{(p-1)(q-1)} \equiv 1 \pmod{p},
  $$
- similarly
  $$
  a^{(p-1)(q-1)} \equiv 1 \pmod{q}.
  $$

By Chinese remainder:
$$
a^{(p-1)(q-1)} \equiv 1 \pmod{pq}.
$$

This is exactly Euler’s theorem for $n=pq$ since $\varphi(pq)=(p-1)(q-1)$.

(We formalized Euler’s theorem in an earlier note; now you see how FLT is the prime building block.)

---

## 7. Standard FLT applications (fully worked)

Now we mirror and clean up the style of your examples.

### 7.1 Example: show $17 \mid 11^{104} + 1$

We want to prove
$$
11^{104} \equiv -1 \pmod{17}.
$$

Step 1: apply FLT.

Since $17$ is prime and $\gcd(11,17)=1$:
$$
11^{16} \equiv 1 \pmod{17}.
$$

Step 2: reduce exponent.

Write $104$ in terms of $16$:

- $16\cdot6 = 96$,
- $104 = 96 + 8$.

So
$$
11^{104} = 11^{96} \cdot 11^8 = (11^{16})^6 \cdot 11^8.
$$

Modulo $17$:

- $(11^{16})^6 \equiv 1^6 = 1$,
- so $11^{104} \equiv 11^8 \pmod{17}$.

Step 3: compute $11^2,11^4,11^8$ mod $17$ carefully.

- $11^2 = 121$.
  Divide by $17$: $17\cdot7 = 119$, remainder $2$,
  so $11^2 \equiv 2 \pmod{17}$.

- $11^4 = (11^2)^2 \equiv 2^2 = 4 \pmod{17}$.

- $11^8 = (11^4)^2 \equiv 4^2 = 16 \equiv -1 \pmod{17}$.

So
$$
11^{104} \equiv 11^8 \equiv -1 \pmod{17},
$$
hence
$$
17 \mid 11^{104} + 1.
$$

Everything is step-by-step: FLT → exponent reduction → tiny arithmetic.

---

### 7.2 Example: if $\gcd(a,35)=1$, prove $a^{12} \equiv 1 \pmod{35}$

Here $35 = 5\cdot7$.

Given $\gcd(a,35)=1$, we have both $\gcd(a,5)=1$ and $\gcd(a,7)=1$.

By FLT:

- modulo $5$: $a^4 \equiv 1$,
- modulo $7$: $a^6 \equiv 1$.

Now $12$ is a common multiple of $4$ and $6$:

- $12 = 3\cdot4$,
- $12 = 2\cdot6$.

So:

- mod $5$: $(a^4)^3 \equiv 1^3 \equiv 1 \Rightarrow a^{12}\equiv1$,
- mod $7$: $(a^6)^2 \equiv 1^2 \equiv 1 \Rightarrow a^{12}\equiv1$.

Thus
$$
a^{12} \equiv 1 \pmod{5}
\quad\text{and}\quad
a^{12} \equiv 1 \pmod{7}.
$$

Since $\gcd(5,7)=1$, by CRT:

$$
a^{12} \equiv 1 \pmod{35}.
$$

This is exactly the pattern: combine FLT on each prime factor, then glue with CRT.

---

### 7.3 Example: if $\gcd(a,168)=1$, show $168 \mid a^6 - 1$

Here $168 = 2^3 \cdot 3 \cdot 7$.

Given $\gcd(a,168)=1$, we have

- $a$ odd (coprime to $2^3$),
- $\gcd(a,3)=1$,
- $\gcd(a,7)=1$.

Apply FLT:

- modulo $3$: $a^2 \equiv 1$,
- modulo $7$: $a^6 \equiv 1$,
- modulo $2$: trivial since $a$ odd $\Rightarrow a \equiv 1 \pmod{2}$ so $a^6 \equiv 1$,
  but we need stronger: modulo $8$ due to $2^3$.

For powers of $2$ and odd $a$, a quick observation:

Any odd $a$ can be written $a=2k+1$.

Compute $a^2$ modulo $8$:

$$
a^2 = (2k+1)^2 = 4k^2 + 4k + 1 = 4k(k+1) + 1.
$$

Since $k(k+1)$ is always even, $4k(k+1)$ is divisible by $8$, so

$$
a^2 \equiv 1 \pmod{8}.
$$

Then

$$
a^6 = (a^2)^3 \equiv 1^3 = 1 \pmod{8}.
$$

So we have:

- $a^6 \equiv 1 \pmod{8}$,
- $a^6 \equiv 1 \pmod{3}$ (from $a^2\equiv1$),
- $a^6 \equiv 1 \pmod{7}$.

Since $8,3,7$ are pairwise coprime and $8\cdot 3\cdot 7 = 168$, CRT gives

$$
a^6 \equiv 1 \pmod{168},
$$

so $168 \mid a^6 - 1$.

This is exactly the detailed argument behind your handwritten proof.

---

### 7.4 Example: if $\gcd(a,133)=1$, show $133 \mid a^{18} - b^{18}$ under given conditions

(Your sheet goes through variants with $7$ and $19$.)

General pattern used:

1. Factor modulus: $133 = 7\cdot 19$.
2. Use FLT separately:
   - if $\gcd(a,7)=1$, $a^6 \equiv 1 \pmod{7}$;
   - if $\gcd(a,19)=1$, $a^{18} \equiv 1 \pmod{19}$.
3. Arrange exponents (like $18 = \text{lcm}(6,18)$) so that
   - $a^{18} \equiv 1$ modulo both primes.
4. For expressions $a^{18} - b^{18}$, if both $a$ and $b$ are coprime to the primes, then both satisfy these congruences, so
   $$
   a^{18} \equiv b^{18} \pmod{7} \Rightarrow 7\mid a^{18}-b^{18},
   $$
   similarly for $19$. Then CRT gives divisibility by $133$.

Every exam problem of that style is: break modulus into prime powers, use FLT (or its variants) on each, align exponents, recombine.

---

### 7.5 Example: show $60 \mid a^4 - 1$ when $\gcd(a,30)=1$

You have a version of this.

Given $\gcd(a,30)=1$, we know $\gcd(a,2)=\gcd(a,3)=\gcd(a,5)=1$.

We need to prove:
$$
a^4 \equiv 1 \pmod{60}.
$$

Factor $60 = 4\cdot 3\cdot 5$ with $(4,3,5)$ pairwise coprime.

1. Modulo $3$: by FLT, $a^2 \equiv 1 \pmod{3}$, so $a^4 \equiv 1$.
2. Modulo $5$: by FLT, $a^4 \equiv 1 \pmod{5}$ directly.
3. Modulo $4$: since $\gcd(a,2)=1$, $a$ odd, so $a \equiv 1$ or $3$ mod $4$.
   In both cases $a^2 \equiv 1$ mod $4$, hence $a^4 \equiv 1$ mod $4$.

Thus

- $a^4 \equiv 1 \pmod{4}$,
- $a^4 \equiv 1 \pmod{3}$,
- $a^4 \equiv 1 \pmod{5}$.

As $\gcd(4,3,5)=1$ and $4\cdot3\cdot5=60$, CRT implies

$$
a^4 \equiv 1 \pmod{60},
$$

i.e. $60 \mid a^4 - 1$.

Your notes phrase it in terms of factors $2,3,5$; this is the organized version.

---

## 8. Classic exam tricks with FLT

Here are standard patterns (all grounded in what we proved):

1. **Reduce huge exponents mod $p-1$ (when $\gcd(a,p)=1$).**

   Use:
   $$
   a^{p-1} \equiv 1 \Rightarrow
   a^k \equiv a^{\,k \bmod (p-1)} \pmod{p}.
   $$

   Example: units digit of $3^{100}$:
   - work mod $10$ (careful: $10$ is not prime, but we can use CRT).
   - mod $2$, trivial; mod $5$, FLT: $3^4\equiv 1$ so $3^{100} \equiv 3^{(4\cdot25)} \equiv 1$.
   - combine: $3^{100} \equiv 1 \pmod{10}$, so units digit $1$.

2. **Use CRT with FLT.**

   For a composite modulus $n$ factor into primes, handle each prime by FLT, then recombine.

3. **Detect divisibility.**

   To show $m\mid a^k \pm 1$, compute $a^k$ modulo each prime factor of $m$ via FLT and confirm you get $\mp 1$ as needed.

4. **Sums of powers modulo $p$.**

   Example from your notes: for odd prime $p$,
   $$
   1^p + 2^p + \dots + (p-1)^p \equiv 0 \pmod{p}.
   $$
   Here use $a^p\equiv a$, and the fact that
   $$
   \sum_{a=1}^{p-1} a \equiv \frac{p(p-1)}{2} \equiv 0 \pmod{p}.
   $$

5. **Binomial coefficients mod $p$.**

   For $1\le k\le p-1$:
   $$
   \binom{p}{k} \equiv 0 \pmod{p}.
   $$
   This is the same observation we used in the alternative proof.

---
